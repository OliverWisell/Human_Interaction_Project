<!DOCTYPE html>
<html>
  <head>
    <title>Quiz</title>
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
  </head>
  <body>
    <div id="login">
      <h2>Skriv in ditt namn!</h2>
      <input id="name" placeholder="Skriv namn" />
      <button onclick="join()">Join</button>
    </div>

    <div id="efterSvar" style="display: none;">
      <h2>Ditt val är: <span id="dittVal"></span></h2>
      <p>Väntar på att resterande skall svara</p>
    </div>

    <div id="lobby" style="display: none;">
      <h2>Vänterum</h2>
      <p>Väntar på att admin ska starta spelet...</p>
    </div>
    
    <div id="fråga" style="display: none;">
      <h2>Fråga</h2>
      <p id="question">Fråga kommer här</p>
      <button id="yesBtn" onclick="answer('Yes')">Yes</button>
      <button id="noBtn" onclick="answer('No')">No</button>
    </div>

    <div id="resultat" style="display:none;">
      <h2 id="resultText"></h2>
    </div>

    <script>
      const socket = io();

      function join() {
        const name = document.getElementById("name").value;
        socket.emit("join", { name });
        document.getElementById("login").style.display = "none";
        document.getElementById("lobby").style.display = "block";
      }

      socket.on("start_question", () => {
        document.getElementById("lobby").style.display = "none";
        document.getElementById("fråga").style.display = "block";
      });

      socket.on("result", data => {
        document.getElementById("efterSvar").style.display = "none";
        document.getElementById("resultat").style.display = "block";

        const text = data.outcome === "win" ? "Du vann!" : "Du förlorade!";
        document.getElementById("resultText").textContent = text;
      });

      
      function answer(choice) {
        socket.emit("answer", { choice });
        document.getElementById("dittVal").textContent = choice;
        //göm frågevyn

        document.getElementById("yesBtn").disabled = true;
        document.getElementById("noBtn").disabled = true;


        document.getElementById("fråga").style.display = "none";
        document.getElementById("efterSvar").style.display = "block";
        document.getElementById("dittVal").textContent = choice;

        alert("Svar skickat: " + choice);
        
      }
    </script>
  </body>
</html>
