<!DOCTYPE html>
<html>
<head>
  <title>Adminvy</title>
  <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
</head>
<body>
  <h2>Adminpanel</h2>
  <p>Antal deltagare: <span id="counter">0</span></p>
  <button onclick="start()">Starta quiz</button>
  <button id="showResultsBtn" onclick="showResults()" style="display:none;">Visa resultat</button>

  <h3>Statistik</h3>
  <ul>
    <li>Yes: <span id="yesCount">0</span></li>
    <li>No: <span id="noCount">0</span></li>
  </ul>
  <script>
    const socket = io();
    let count = 0;

    socket.on("vote_update", data => {
      const total = data.Yes + data.No
      document.getElementById("yesCount").textContent = data.Yes;
      document.getElementById("noCount").textContent = data.No;

      if (total === totalPlayers) {
        document.getElementById("showResultsBtn").style.display = "block";
      }
    });

    socket.on("player_joined", data => {
      count++;
      document.getElementById("counter").textContent = count;
    });

    num_players = 0
    let totalPlayers = 0;

    socket.on("num_players", data => {
      totalPlayers = data.count;
    });
    function start() {
      socket.emit("start");
    }
    function showResults() {
      socket.emit("show_results");
    }
  </script>
</body>
</html>